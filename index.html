<!DOCTYPE html>
<html lang="zh-HK">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>六爻解卦工具</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        
        .container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 30px;
        }
        
        .section {
            margin-bottom: 30px;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 5px;
            background-color: #fafafa;
        }
        
        .section h2 {
            margin-top: 0;
            color: #555;
            border-bottom: 2px solid #ddd;
            padding-bottom: 10px;
        }
        
        .form-row {
            display: flex;
            gap: 15px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }
        
        .form-group {
            display: flex;
            flex-direction: column;
            min-width: 120px;
        }
        
        .form-group label {
            margin-bottom: 5px;
            font-weight: bold;
            color: #666;
        }
        
        .form-group input, .form-group select {
            padding: 8px;
            border: 1px solid #ccc;
            border-radius: 4px;
            font-size: 14px;
        }
        
        .yao-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .yao-item {
            border: 2px solid #ddd;
            padding: 15px;
            border-radius: 8px;
            background-color: white;
        }
        
        .yao-item h3 {
            margin-top: 0;
            color: #444;
            text-align: center;
            background-color: #e9e9e9;
            padding: 10px;
            border-radius: 5px;
        }
        
        .checkbox-group {
            display: flex;
            gap: 15px;
            align-items: center;
            margin: 10px 0;
        }
        
        .checkbox-group label {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .btn-container {
            text-align: center;
            margin: 30px 0;
        }
        
        .btn-generate {
            background-color: #007cba;
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: 5px;
            font-size: 16px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        
        .btn-generate:hover {
            background-color: #005a8a;
        }
        
        .result-container {
            margin-top: 30px;
            padding: 20px;
            border: 2px solid #007cba;
            border-radius: 5px;
            background-color: #f0f8ff;
            display: none;
        }
        
        .result-textarea {
            width: 100%;
            height: 400px;
            padding: 15px;
            border: 1px solid #ccc;
            border-radius: 5px;
            font-family: monospace;
            font-size: 14px;
            resize: vertical;
        }
        
        .btn-copy {
            background-color: #28a745;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin-top: 10px;
        }
        
        .btn-copy:hover {
            background-color: #218838;
        }
        
        .login-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }
        
        .login-box {
            background: white;
            padding: 40px;
            border-radius: 10px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.3);
            text-align: center;
            min-width: 300px;
        }
        
        .login-box h2 {
            margin-bottom: 20px;
            color: #333;
        }
        
        .login-box input {
            width: 100%;
            padding: 12px;
            margin: 10px 0;
            border: 1px solid #ccc;
            border-radius: 5px;
            font-size: 16px;
            box-sizing: border-box;
        }
        
        .login-btn {
            background-color: #007cba;
            color: white;
            padding: 12px 30px;
            border: none;
            border-radius: 5px;
            font-size: 16px;
            cursor: pointer;
            width: 100%;
            margin-top: 10px;
        }
        
        .login-btn:hover {
            background-color: #005a8a;
        }
        
        .error-message {
            color: #d32f2f;
            margin-top: 10px;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <!-- 登入遮罩層 -->
    <div class="login-overlay" id="login-overlay">
        <div class="login-box">
            <h2>六爻解卦工具</h2>
            <p>請輸入密碼進入系統</p>
            <input type="password" id="password-input" placeholder="請輸入密碼" onkeypress="handlePasswordEnter(event)">
            <button class="login-btn" onclick="checkPassword()">進入系統</button>
            <div class="error-message" id="error-message" style="display: none;">密碼錯誤，請重試</div>
        </div>
    </div>

    <div class="container" id="main-container" style="display: none;">
        <h1>六爻解卦工具</h1>
        
        <!-- 六十甲子時間 -->
        <div class="section">
            <h2>六十甲子時間</h2>
            <div class="form-row">
                <div class="form-group">
                    <label>年：</label>
                    <select id="year-jiazi">
                        <option value="">選擇年</option>
                        <option value="甲子">甲子</option>
                        <option value="乙丑">乙丑</option>
                        <option value="丙寅">丙寅</option>
                        <option value="丁卯">丁卯</option>
                        <option value="戊辰">戊辰</option>
                        <option value="己巳">己巳</option>
                        <option value="庚午">庚午</option>
                        <option value="辛未">辛未</option>
                        <option value="壬申">壬申</option>
                        <option value="癸酉">癸酉</option>
                        <option value="甲戌">甲戌</option>
                        <option value="乙亥">乙亥</option>
                        <option value="丙子">丙子</option>
                        <option value="丁丑">丁丑</option>
                        <option value="戊寅">戊寅</option>
                        <option value="己卯">己卯</option>
                        <option value="庚辰">庚辰</option>
                        <option value="辛巳">辛巳</option>
                        <option value="壬午">壬午</option>
                        <option value="癸未">癸未</option>
                        <option value="甲申">甲申</option>
                        <option value="乙酉">乙酉</option>
                        <option value="丙戌">丙戌</option>
                        <option value="丁亥">丁亥</option>
                        <option value="戊子">戊子</option>
                        <option value="己丑">己丑</option>
                        <option value="庚寅">庚寅</option>
                        <option value="辛卯">辛卯</option>
                        <option value="壬辰">壬辰</option>
                        <option value="癸巳">癸巳</option>
                        <option value="甲午">甲午</option>
                        <option value="乙未">乙未</option>
                        <option value="丙申">丙申</option>
                        <option value="丁酉">丁酉</option>
                        <option value="戊戌">戊戌</option>
                        <option value="己亥">己亥</option>
                        <option value="庚子">庚子</option>
                        <option value="辛丑">辛丑</option>
                        <option value="壬寅">壬寅</option>
                        <option value="癸卯">癸卯</option>
                        <option value="甲辰">甲辰</option>
                        <option value="乙巳">乙巳</option>
                        <option value="丙午">丙午</option>
                        <option value="丁未">丁未</option>
                        <option value="戊申">戊申</option>
                        <option value="己酉">己酉</option>
                        <option value="庚戌">庚戌</option>
                        <option value="辛亥">辛亥</option>
                        <option value="壬子">壬子</option>
                        <option value="癸丑">癸丑</option>
                        <option value="甲寅">甲寅</option>
                        <option value="乙卯">乙卯</option>
                        <option value="丙辰">丙辰</option>
                        <option value="丁巳">丁巳</option>
                        <option value="戊午">戊午</option>
                        <option value="己未">己未</option>
                        <option value="庚申">庚申</option>
                        <option value="辛酉">辛酉</option>
                        <option value="壬戌">壬戌</option>
                        <option value="癸亥">癸亥</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>月：</label>
                    <select id="month-jiazi">
                        <option value="">選擇月</option>
                        <option value="甲子">甲子</option>
                        <option value="乙丑">乙丑</option>
                        <option value="丙寅">丙寅</option>
                        <option value="丁卯">丁卯</option>
                        <option value="戊辰">戊辰</option>
                        <option value="己巳">己巳</option>
                        <option value="庚午">庚午</option>
                        <option value="辛未">辛未</option>
                        <option value="壬申">壬申</option>
                        <option value="癸酉">癸酉</option>
                        <option value="甲戌">甲戌</option>
                        <option value="乙亥">乙亥</option>
                        <option value="丙子">丙子</option>
                        <option value="丁丑">丁丑</option>
                        <option value="戊寅">戊寅</option>
                        <option value="己卯">己卯</option>
                        <option value="庚辰">庚辰</option>
                        <option value="辛巳">辛巳</option>
                        <option value="壬午">壬午</option>
                        <option value="癸未">癸未</option>
                        <option value="甲申">甲申</option>
                        <option value="乙酉">乙酉</option>
                        <option value="丙戌">丙戌</option>
                        <option value="丁亥">丁亥</option>
                        <option value="戊子">戊子</option>
                        <option value="己丑">己丑</option>
                        <option value="庚寅">庚寅</option>
                        <option value="辛卯">辛卯</option>
                        <option value="壬辰">壬辰</option>
                        <option value="癸巳">癸巳</option>
                        <option value="甲午">甲午</option>
                        <option value="乙未">乙未</option>
                        <option value="丙申">丙申</option>
                        <option value="丁酉">丁酉</option>
                        <option value="戊戌">戊戌</option>
                        <option value="己亥">己亥</option>
                        <option value="庚子">庚子</option>
                        <option value="辛丑">辛丑</option>
                        <option value="壬寅">壬寅</option>
                        <option value="癸卯">癸卯</option>
                        <option value="甲辰">甲辰</option>
                        <option value="乙巳">乙巳</option>
                        <option value="丙午">丙午</option>
                        <option value="丁未">丁未</option>
                        <option value="戊申">戊申</option>
                        <option value="己酉">己酉</option>
                        <option value="庚戌">庚戌</option>
                        <option value="辛亥">辛亥</option>
                        <option value="壬子">壬子</option>
                        <option value="癸丑">癸丑</option>
                        <option value="甲寅">甲寅</option>
                        <option value="乙卯">乙卯</option>
                        <option value="丙辰">丙辰</option>
                        <option value="丁巳">丁巳</option>
                        <option value="戊午">戊午</option>
                        <option value="己未">己未</option>
                        <option value="庚申">庚申</option>
                        <option value="辛酉">辛酉</option>
                        <option value="壬戌">壬戌</option>
                        <option value="癸亥">癸亥</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>日：</label>
                    <select id="day-jiazi">
                        <option value="">選擇日</option>
                        <option value="甲子">甲子</option>
                        <option value="乙丑">乙丑</option>
                        <option value="丙寅">丙寅</option>
                        <option value="丁卯">丁卯</option>
                        <option value="戊辰">戊辰</option>
                        <option value="己巳">己巳</option>
                        <option value="庚午">庚午</option>
                        <option value="辛未">辛未</option>
                        <option value="壬申">壬申</option>
                        <option value="癸酉">癸酉</option>
                        <option value="甲戌">甲戌</option>
                        <option value="乙亥">乙亥</option>
                        <option value="丙子">丙子</option>
                        <option value="丁丑">丁丑</option>
                        <option value="戊寅">戊寅</option>
                        <option value="己卯">己卯</option>
                        <option value="庚辰">庚辰</option>
                        <option value="辛巳">辛巳</option>
                        <option value="壬午">壬午</option>
                        <option value="癸未">癸未</option>
                        <option value="甲申">甲申</option>
                        <option value="乙酉">乙酉</option>
                        <option value="丙戌">丙戌</option>
                        <option value="丁亥">丁亥</option>
                        <option value="戊子">戊子</option>
                        <option value="己丑">己丑</option>
                        <option value="庚寅">庚寅</option>
                        <option value="辛卯">辛卯</option>
                        <option value="壬辰">壬辰</option>
                        <option value="癸巳">癸巳</option>
                        <option value="甲午">甲午</option>
                        <option value="乙未">乙未</option>
                        <option value="丙申">丙申</option>
                        <option value="丁酉">丁酉</option>
                        <option value="戊戌">戊戌</option>
                        <option value="己亥">己亥</option>
                        <option value="庚子">庚子</option>
                        <option value="辛丑">辛丑</option>
                        <option value="壬寅">壬寅</option>
                        <option value="癸卯">癸卯</option>
                        <option value="甲辰">甲辰</option>
                        <option value="乙巳">乙巳</option>
                        <option value="丙午">丙午</option>
                        <option value="丁未">丁未</option>
                        <option value="戊申">戊申</option>
                        <option value="己酉">己酉</option>
                        <option value="庚戌">庚戌</option>
                        <option value="辛亥">辛亥</option>
                        <option value="壬子">壬子</option>
                        <option value="癸丑">癸丑</option>
                        <option value="甲寅">甲寅</option>
                        <option value="乙卯">乙卯</option>
                        <option value="丙辰">丙辰</option>
                        <option value="丁巳">丁巳</option>
                        <option value="戊午">戊午</option>
                        <option value="己未">己未</option>
                        <option value="庚申">庚申</option>
                        <option value="辛酉">辛酉</option>
                        <option value="壬戌">壬戌</option>
                        <option value="癸亥">癸亥</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>時：</label>
                    <select id="hour-jiazi">
                        <option value="">選擇時</option>
                        <option value="甲子">甲子</option>
                        <option value="乙丑">乙丑</option>
                        <option value="丙寅">丙寅</option>
                        <option value="丁卯">丁卯</option>
                        <option value="戊辰">戊辰</option>
                        <option value="己巳">己巳</option>
                        <option value="庚午">庚午</option>
                        <option value="辛未">辛未</option>
                        <option value="壬申">壬申</option>
                        <option value="癸酉">癸酉</option>
                        <option value="甲戌">甲戌</option>
                        <option value="乙亥">乙亥</option>
                        <option value="丙子">丙子</option>
                        <option value="丁丑">丁丑</option>
                        <option value="戊寅">戊寅</option>
                        <option value="己卯">己卯</option>
                        <option value="庚辰">庚辰</option>
                        <option value="辛巳">辛巳</option>
                        <option value="壬午">壬午</option>
                        <option value="癸未">癸未</option>
                        <option value="甲申">甲申</option>
                        <option value="乙酉">乙酉</option>
                        <option value="丙戌">丙戌</option>
                        <option value="丁亥">丁亥</option>
                        <option value="戊子">戊子</option>
                        <option value="己丑">己丑</option>
                        <option value="庚寅">庚寅</option>
                        <option value="辛卯">辛卯</option>
                        <option value="壬辰">壬辰</option>
                        <option value="癸巳">癸巳</option>
                        <option value="甲午">甲午</option>
                        <option value="乙未">乙未</option>
                        <option value="丙申">丙申</option>
                        <option value="丁酉">丁酉</option>
                        <option value="戊戌">戊戌</option>
                        <option value="己亥">己亥</option>
                        <option value="庚子">庚子</option>
                        <option value="辛丑">辛丑</option>
                        <option value="壬寅">壬寅</option>
                        <option value="癸卯">癸卯</option>
                        <option value="甲辰">甲辰</option>
                        <option value="乙巳">乙巳</option>
                        <option value="丙午">丙午</option>
                        <option value="丁未">丁未</option>
                        <option value="戊申">戊申</option>
                        <option value="己酉">己酉</option>
                        <option value="庚戌">庚戌</option>
                        <option value="辛亥">辛亥</option>
                        <option value="壬子">壬子</option>
                        <option value="癸丑">癸丑</option>
                        <option value="甲寅">甲寅</option>
                        <option value="乙卯">乙卯</option>
                        <option value="丙辰">丙辰</option>
                        <option value="丁巳">丁巳</option>
                        <option value="戊午">戊午</option>
                        <option value="己未">己未</option>
                        <option value="庚申">庚申</option>
                        <option value="辛酉">辛酉</option>
                        <option value="壬戌">壬戌</option>
                        <option value="癸亥">癸亥</option>
                    </select>
                </div>
            </div>
        </div>

        <!-- 本卦與變卦 -->
        <div class="section">
            <h2>本卦與變卦</h2>
            <div class="form-row">
                <div class="form-group">
                    <label>本卦：</label>
                    <select id="original-gua">
                        <option value="">選擇本卦</option>
                        <option value="乾為天">乾為天</option>
                        <option value="天地否">天地否</option>
                        <option value="天澤履">天澤履</option>
                        <option value="天山遯">天山遯</option>
                        <option value="天火同人">天火同人</option>
                        <option value="天水訟">天水訟</option>
                        <option value="天雷无妄">天雷无妄</option>
                        <option value="天風姤">天風姤</option>
                        <option value="地天泰">地天泰</option>
                        <option value="坤為地">坤為地</option>
                        <option value="地澤臨">地澤臨</option>
                        <option value="地山謙">地山謙</option>
                        <option value="地火明夷">地火明夷</option>
                        <option value="地水師">地水師</option>
                        <option value="地雷復">地雷復</option>
                        <option value="地風升">地風升</option>
                        <option value="澤天夬">澤天夬</option>
                        <option value="澤地萃">澤地萃</option>
                        <option value="兌為澤">兌為澤</option>
                        <option value="澤山咸">澤山咸</option>
                        <option value="澤火革">澤火革</option>
                        <option value="澤水困">澤水困</option>
                        <option value="澤雷隨">澤雷隨</option>
                        <option value="澤風大過">澤風大過</option>
                        <option value="山天大畜">山天大畜</option>
                        <option value="山地剝">山地剝</option>
                        <option value="山澤損">山澤損</option>
                        <option value="艮為山">艮為山</option>
                        <option value="山火賁">山火賁</option>
                        <option value="山水蒙">山水蒙</option>
                        <option value="山雷頤">山雷頤</option>
                        <option value="山風蠱">山風蠱</option>
                        <option value="火天大有">火天大有</option>
                        <option value="火地晉">火地晉</option>
                        <option value="火澤睽">火澤睽</option>
                        <option value="火山旅">火山旅</option>
                        <option value="離為火">離為火</option>
                        <option value="火水未濟">火水未濟</option>
                        <option value="火雷噬嗑">火雷噬嗑</option>
                        <option value="火風鼎">火風鼎</option>
                        <option value="水天需">水天需</option>
                        <option value="水地比">水地比</option>
                        <option value="水澤節">水澤節</option>
                        <option value="水山蹇">水山蹇</option>
                        <option value="水火既濟">水火既濟</option>
                        <option value="坎為水">坎為水</option>
                        <option value="水雷屯">水雷屯</option>
                        <option value="水風井">水風井</option>
                        <option value="雷天大壯">雷天大壯</option>
                        <option value="雷地豫">雷地豫</option>
                        <option value="雷澤歸妹">雷澤歸妹</option>
                        <option value="雷山小過">雷山小過</option>
                        <option value="雷火豐">雷火豐</option>
                        <option value="雷水解">雷水解</option>
                        <option value="震為雷">震為雷</option>
                        <option value="雷風恒">雷風恒</option>
                        <option value="風天小畜">風天小畜</option>
                        <option value="風地觀">風地觀</option>
                        <option value="風澤中孚">風澤中孚</option>
                        <option value="風山漸">風山漸</option>
                        <option value="風火家人">風火家人</option>
                        <option value="風水渙">風水渙</option>
                        <option value="風雷益">風雷益</option>
                        <option value="巽為風">巽為風</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>本卦特殊屬性：</label>
                    <select id="original-special">
                        <option value="">無特殊</option>
                        <option value="六沖">六沖</option>
                        <option value="六合">六合</option>
                        <option value="游魂">游魂</option>
                        <option value="歸魂">歸魂</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>變卦：</label>
                    <select id="changed-gua">
                        <option value="">選擇變卦</option>
                        <option value="乾為天">乾為天</option>
                        <option value="天地否">天地否</option>
                        <option value="天澤履">天澤履</option>
                        <option value="天山遯">天山遯</option>
                        <option value="天火同人">天火同人</option>
                        <option value="天水訟">天水訟</option>
                        <option value="天雷无妄">天雷无妄</option>
                        <option value="天風姤">天風姤</option>
                        <option value="地天泰">地天泰</option>
                        <option value="坤為地">坤為地</option>
                        <option value="地澤臨">地澤臨</option>
                        <option value="地山謙">地山謙</option>
                        <option value="地火明夷">地火明夷</option>
                        <option value="地水師">地水師</option>
                        <option value="地雷復">地雷復</option>
                        <option value="地風升">地風升</option>
                        <option value="澤天夬">澤天夬</option>
                        <option value="澤地萃">澤地萃</option>
                        <option value="兌為澤">兌為澤</option>
                        <option value="澤山咸">澤山咸</option>
                        <option value="澤火革">澤火革</option>
                        <option value="澤水困">澤水困</option>
                        <option value="澤雷隨">澤雷隨</option>
                        <option value="澤風大過">澤風大過</option>
                        <option value="山天大畜">山天大畜</option>
                        <option value="山地剝">山地剝</option>
                        <option value="山澤損">山澤損</option>
                        <option value="艮為山">艮為山</option>
                        <option value="山火賁">山火賁</option>
                        <option value="山水蒙">山水蒙</option>
                        <option value="山雷頤">山雷頤</option>
                        <option value="山風蠱">山風蠱</option>
                        <option value="火天大有">火天大有</option>
                        <option value="火地晉">火地晉</option>
                        <option value="火澤睽">火澤睽</option>
                        <option value="火山旅">火山旅</option>
                        <option value="離為火">離為火</option>
                        <option value="火水未濟">火水未濟</option>
                        <option value="火雷噬嗑">火雷噬嗑</option>
                        <option value="火風鼎">火風鼎</option>
                        <option value="水天需">水天需</option>
                        <option value="水地比">水地比</option>
                        <option value="水澤節">水澤節</option>
                        <option value="水山蹇">水山蹇</option>
                        <option value="水火既濟">水火既濟</option>
                        <option value="坎為水">坎為水</option>
                        <option value="水雷屯">水雷屯</option>
                        <option value="水風井">水風井</option>
                        <option value="雷天大壯">雷天大壯</option>
                        <option value="雷地豫">雷地豫</option>
                        <option value="雷澤歸妹">雷澤歸妹</option>
                        <option value="雷山小過">雷山小過</option>
                        <option value="雷火豐">雷火豐</option>
                        <option value="雷水解">雷水解</option>
                        <option value="震為雷">震為雷</option>
                        <option value="雷風恒">雷風恒</option>
                        <option value="風天小畜">風天小畜</option>
                        <option value="風地觀">風地觀</option>
                        <option value="風澤中孚">風澤中孚</option>
                        <option value="風山漸">風山漸</option>
                        <option value="風火家人">風火家人</option>
                        <option value="風水渙">風水渙</option>
                        <option value="風雷益">風雷益</option>
                        <option value="巽為風">巽為風</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>變卦特殊屬性：</label>
                    <select id="changed-special">
                        <option value="">無特殊</option>
                        <option value="六沖">六沖</option>
                        <option value="六合">六合</option>
                        <option value="游魂">游魂</option>
                        <option value="歸魂">歸魂</option>
                    </select>
                </div>
            </div>
        </div>

        <!-- 六爻詳細資料 -->
        <div class="section">
            <h2>六爻詳細資料</h2>
            <div class="yao-container" id="yao-container">
                <!-- 六爻將通過JavaScript生成 -->
            </div>
        </div>

        <div class="btn-container">
            <button class="btn-generate" onclick="generatePrompt()">生成Prompt</button>
        </div>

        <!-- 結果顯示區域 -->
        <div class="result-container" id="result-container">
            <h2>生成的Prompt：</h2>
            <textarea class="result-textarea" id="result-textarea" readonly></textarea>
            <button class="btn-copy" onclick="copyToClipboard()">複製到剪貼板</button>
        </div>
    </div>

    <script>
        // 設定密碼（你可以改成你想要的密碼）
        const CORRECT_PASSWORD = "1234";
        
        // 檢查密碼
        function checkPassword() {
            const inputPassword = document.getElementById('password-input').value;
            const errorMessage = document.getElementById('error-message');
            
            if (inputPassword === CORRECT_PASSWORD) {
                // 密碼正確，隱藏登入層，顯示主內容
                document.getElementById('login-overlay').style.display = 'none';
                document.getElementById('main-container').style.display = 'block';
                initializePage();
            } else {
                // 密碼錯誤，顯示錯誤信息
                errorMessage.style.display = 'block';
                document.getElementById('password-input').value = '';
                document.getElementById('password-input').focus();
            }
        }
        
        // 處理Enter鍵
        function handlePasswordEnter(event) {
            if (event.key === 'Enter') {
                checkPassword();
            }
        }
        
        // 十二地支選項
        const earthlyBranches = ['子', '丑', '寅', '卯', '辰', '巳', '午', '未', '申', '酉', '戌', '亥'];
        
        // 六親選項
        const sixRelatives = ['父母', '兄弟', '子孫', '妻財', '官鬼'];
        
        // 六獸選項
        const sixAnimals = ['青龍', '朱雀', '勾陳', '螣蛇', '白虎', '玄武'];

        // 初始化頁面
        function initializePage() {
            generateYaoInputs();
        }

        // 生成六爻輸入區域
        function generateYaoInputs() {
            const container = document.getElementById('yao-container');
            const yaoNames = ['初爻', '二爻', '三爻', '四爻', '五爻', '上爻'];
            
            for (let i = 0; i < 6; i++) {
                const yaoDiv = document.createElement('div');
                yaoDiv.className = 'yao-item';
                yaoDiv.innerHTML = `
                    <h3>${yaoNames[i]}</h3>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label>伏神：</label>
                            <select id="fushen-${i}">
                                <option value="">無伏神</option>
                                ${earthlyBranches.map(branch => `<option value="${branch}">${branch}</option>`).join('')}
                            </select>
                        </div>
                        <div class="form-group">
                            <label>伏神六親：</label>
                            <select id="fushen-relative-${i}">
                                <option value="">無</option>
                                ${sixRelatives.map(rel => `<option value="${rel}">${rel}</option>`).join('')}
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label>六獸：</label>
                            <select id="animal-${i}">
                                <option value="">選擇六獸</option>
                                ${sixAnimals.map(animal => `<option value="${animal}">${animal}</option>`).join('')}
                            </select>
                        </div>
                        <div class="form-group">
                            <label>本卦六親：</label>
                            <select id="original-relative-${i}">
                                <option value="">選擇六親</option>
                                ${sixRelatives.map(rel => `<option value="${rel}">${rel}</option>`).join('')}
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label>裝卦(十二地支)：</label>
                            <select id="original-branch-${i}">
                                <option value="">選擇地支</option>
                                ${earthlyBranches.map(branch => `<option value="${branch}">${branch}</option>`).join('')}
                            </select>
                        </div>
                        <div class="form-group">
                            <label>變卦(十二地支)：</label>
                            <select id="changed-branch-${i}" class="changed-yao-field">
                                <option value="">選擇地支</option>
                                ${earthlyBranches.map(branch => `<option value="${branch}">${branch}</option>`).join('')}
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label>變卦六親：</label>
                            <select id="changed-relative-${i}" class="changed-gua-field">
                                <option value="">選擇六親</option>
                                ${sixRelatives.map(rel => `<option value="${rel}">${rel}</option>`).join('')}
                            </select>
                        </div>
                    </div>
                    
                    <div class="checkbox-group">
                        <label><input type="checkbox" id="shi-${i}"> 世爻</label>
                        <label><input type="checkbox" id="ying-${i}"> 應爻</label>
                        <label><input type="checkbox" id="body-${i}"> 卦身</label>
                        <label><input type="radio" name="yinyang-${i}" value="陽爻"> 陽爻</label>
                        <label><input type="radio" name="yinyang-${i}" value="陰爻"> 陰爻</label>
                    </div>
                `;
                container.appendChild(yaoDiv);
            }
        }

        // 控制單一爻的變爻部分顯示/隱藏
        function toggleSingleChangedYao(yaoIndex) {
            const hasChanged = document.getElementById(`has-changed-${yaoIndex}`).value;
            const changedSection = document.getElementById(`changed-section-${yaoIndex}`);
            const changedBranch = document.getElementById(`changed-branch-${yaoIndex}`);
            const changedRelative = document.getElementById(`changed-relative-${yaoIndex}`);
            
            if (hasChanged === 'yes') {
                changedSection.style.display = 'block';
            } else {
                changedSection.style.display = 'none';
                changedBranch.value = ''; // 清空值
                changedRelative.value = ''; // 清空值
            }
        }

        // 生成Prompt
        function generatePrompt() {
            // 收集四柱時間
            const year = document.getElementById('year').value;
            const month = document.getElementById('month').value;
            const day = document.getElementById('day').value;
            const hour = document.getElementById('hour').value;
            
            // 收集本卦變卦信息
            const originalGua = document.getElementById('original-gua').value;
            const originalSpecial = document.getElementById('original-special').value;
            const changedGua = document.getElementById('changed-gua').value;
            const changedSpecial = document.getElementById('changed-special').value;
            
            // 生成Prompt文本
            let prompt = `請幫我解這個六爻卦：\n\n`;
            prompt += `起卦時間：${year}年${month}月${day}日 ${hour}\n`;
            prompt += `本卦：${originalGua}${originalSpecial ? ' (' + originalSpecial + ')' : ''}\n`;
            prompt += `變卦：${changedGua}${changedSpecial ? ' (' + changedSpecial + ')' : ''}\n\n`;
            
            prompt += `六爻詳細資料：\n`;
            prompt += `| 爻位 | 伏神 | 伏神六親 | 六獸 | 本卦六親 | 裝卦 | 特殊 | 陰陽 | 變卦 | 變卦六親 |\n`;
            prompt += `|------|------|----------|------|----------|------|------|------|------|----------|\n`;
            
            const yaoNames = ['上爻', '五爻', '四爻', '三爻', '二爻', '初爻'];
            
            for (let i = 5; i >= 0; i--) {
                const fushen = document.getElementById(`fushen-${i}`).value || '無';
                const fushenRelative = document.getElementById(`fushen-relative-${i}`).value || '無';
                const animal = document.getElementById(`animal-${i}`).value || '';
                const originalRelative = document.getElementById(`original-relative-${i}`).value || '';
                const originalBranch = document.getElementById(`original-branch-${i}`).value || '';
                const changedBranch = document.getElementById(`changed-branch-${i}`).value || '';
                const changedRelative = document.getElementById(`changed-relative-${i}`).value || '';
                
                // 收集特殊標記
                const shi = document.getElementById(`shi-${i}`).checked ? '世' : '';
                const ying = document.getElementById(`ying-${i}`).checked ? '應' : '';
                const body = document.getElementById(`body-${i}`).checked ? '身' : '';
                const special = [shi, ying, body].filter(x => x).join('/') || '無';
                
                // 收集陰陽
                const yinyang = document.querySelector(`input[name="yinyang-${i}"]:checked`)?.value || '';
                
                // 檢查這一爻是否有變卦
                const hasThisChanged = document.getElementById(`has-changed-${i}`).value === 'yes';
                
                if (hasAnyChangedYao) {
                    if (hasThisChanged) {
                        prompt += `| ${yaoNames[5-i]} | ${fushen} | ${fushenRelative} | ${animal} | ${originalRelative} | ${originalBranch} | ${special} | ${yinyang} | ${changedBranch} | ${changedRelative} |\n`;
                    } else {
                        prompt += `| ${yaoNames[5-i]} | ${fushen} | ${fushenRelative} | ${animal} | ${originalRelative} | ${originalBranch} | ${special} | ${yinyang} | 無變 | 無變 |\n`;
                    }
                } else {
                    prompt += `| ${yaoNames[5-i]} | ${fushen} | ${fushenRelative} | ${animal} | ${originalRelative} | ${originalBranch} | ${special} | ${yinyang} |\n`;
                }
            }
            
            prompt += `\n請根據以上信息進行詳細解卦分析。`;
            
            // 顯示結果
            document.getElementById('result-textarea').value = prompt;
            document.getElementById('result-container').style.display = 'block';
            
            // 滾動到結果區域
            document.getElementById('result-container').scrollIntoView({ behavior: 'smooth' });
        }

        // 複製到剪貼板
        function copyToClipboard() {
            const textarea = document.getElementById('result-textarea');
            textarea.select();
            document.execCommand('copy');
            alert('已複製到剪貼板！');
        }

        // 頁面載入時不需要自動初始化，等密碼驗證後再初始化
        window.onload = function() {
            // 聚焦密碼輸入框
            document.getElementById('password-input').focus();
        };
    </script>
</body>
</html>
