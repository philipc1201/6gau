<!DOCTYPE html>
<html lang="zh-HK">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>六爻解卦工具</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        
        .container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 30px;
        }
        
        .section {
            margin-bottom: 30px;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 5px;
            background-color: #fafafa;
        }
        
        .section h2 {
            margin-top: 0;
            color: #555;
            border-bottom: 2px solid #ddd;
            padding-bottom: 10px;
        }
        
        .form-row {
            display: flex;
            gap: 15px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }
        
        .form-group {
            display: flex;
            flex-direction: column;
            min-width: 120px;
        }
        
        .form-group label {
            margin-bottom: 5px;
            font-weight: bold;
            color: #666;
        }
        
        .form-group input, .form-group select {
            padding: 8px;
            border: 1px solid #ccc;
            border-radius: 4px;
            font-size: 14px;
        }
        
        .yao-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .yao-item {
            border: 2px solid #ddd;
            padding: 15px;
            border-radius: 8px;
            background-color: white;
        }
        
        .yao-item h3 {
            margin-top: 0;
            color: #444;
            text-align: center;
            background-color: #e9e9e9;
            padding: 10px;
            border-radius: 5px;
        }
        
        .checkbox-group {
            display: flex;
            gap: 15px;
            align-items: center;
            margin: 10px 0;
        }
        
        .checkbox-group label {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .btn-container {
            text-align: center;
            margin: 30px 0;
        }
        
        .btn-generate {
            background-color: #007cba;
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: 5px;
            font-size: 16px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        
        .btn-generate:hover {
            background-color: #005a8a;
        }
        
        .result-container {
            margin-top: 30px;
            padding: 20px;
            border: 2px solid #007cba;
            border-radius: 5px;
            background-color: #f0f8ff;
            display: none;
        }
        
        .result-textarea {
            width: 100%;
            height: 400px;
            padding: 15px;
            border: 1px solid #ccc;
            border-radius: 5px;
            font-family: monospace;
            font-size: 14px;
            resize: vertical;
        }
        
        .btn-copy {
            background-color: #28a745;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin-top: 10px;
        }
        
        .btn-copy:hover {
            background-color: #218838;
        }
        
        .login-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }
        
        .login-box {
            background: white;
            padding: 40px;
            border-radius: 10px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.3);
            text-align: center;
            min-width: 300px;
        }
        
        .login-box h2 {
            margin-bottom: 20px;
            color: #333;
        }
        
        .login-box input {
            width: 100%;
            padding: 12px;
            margin: 10px 0;
            border: 1px solid #ccc;
            border-radius: 5px;
            font-size: 16px;
            box-sizing: border-box;
        }
        
        .login-btn {
            background-color: #007cba;
            color: white;
            padding: 12px 30px;
            border: none;
            border-radius: 5px;
            font-size: 16px;
            cursor: pointer;
            width: 100%;
            margin-top: 10px;
        }
        
        .login-btn:hover {
            background-color: #005a8a;
        }
        
        .error-message {
            color: #d32f2f;
            margin-top: 10px;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <!-- 登入遮罩層 -->
    <div class="login-overlay" id="login-overlay">
        <div class="login-box">
            <h2>六爻解卦工具</h2>
            <p>請輸入密碼進入系統</p>
            <input type="password" id="password-input" placeholder="請輸入密碼" onkeypress="handlePasswordEnter(event)">
            <button class="login-btn" onclick="checkPassword()">進入系統</button>
            <div class="error-message" id="error-message" style="display: none;">密碼錯誤，請重試</div>
        </div>
    </div>

    <div class="container" id="main-container" style="display: none;">
        <h1>六爻解卦工具</h1>
        
        <!-- 六十甲子時間 -->
        <div class="section">
            <h2>六十甲子時間</h2>
            <div class="form-row">
                <div class="form-group">
                    <label>年：</label>
                    <select id="year-jiazi">
                        <option value="">選擇年</option>
                        <option value="甲子">甲子</option>
                        <option value="乙丑">乙丑</option>
                        <option value="丙寅">丙寅</option>
                        <option value="丁卯">丁卯</option>
                        <option value="戊辰">戊辰</option>
                        <option value="己巳">己巳</option>
                        <option value="庚午">庚午</option>
                        <option value="辛未">辛未</option>
                        <option value="壬申">壬申</option>
                        <option value="癸酉">癸酉</option>
                        <option value="甲戌">甲戌</option>
                        <option value="乙亥">乙亥</option>
                        <option value="丙子">丙子</option>
                        <option value="丁丑">丁丑</option>
                        <option value="戊寅">戊寅</option>
                        <option value="己卯">己卯</option>
                        <option value="庚辰">庚辰</option>
                        <option value="辛巳">辛巳</option>
                        <option value="壬午">壬午</option>
                        <option value="癸未">癸未</option>
                        <option value="甲申">甲申</option>
                        <option value="乙酉">乙酉</option>
                        <option value="丙戌">丙戌</option>
                        <option value="丁亥">丁亥</option>
                        <option value="戊子">戊子</option>
                        <option value="己丑">己丑</option>
                        <option value="庚寅">庚寅</option>
                        <option value="辛卯">辛卯</option>
                        <option value="壬辰">壬辰</option>
                        <option value="癸巳">癸巳</option>
                        <option value="甲午">甲午</option>
                        <option value="乙未">乙未</option>
                        <option value="丙申">丙申</option>
                        <option value="丁酉">丁酉</option>
                        <option value="戊戌">戊戌</option>
                        <option value="己亥">己亥</option>
                        <option value="庚子">庚子</option>
                        <option value="辛丑">辛丑</option>
                        <option value="壬寅">壬寅</option>
                        <option value="癸卯">癸卯</option>
                        <option value="甲辰">甲辰</option>
                        <option value="乙巳">乙巳</option>
                        <option value="丙午">丙午</option>
                        <option value="丁未">丁未</option>
                        <option value="戊申">戊申</option>
                        <option value="己酉">己酉</option>
                        <option value="庚戌">庚戌</option>
                        <option value="辛亥">辛亥</option>
                        <option value="壬子">壬子</option>
                        <option value="癸丑">癸丑</option>
                        <option value="甲寅">甲寅</option>
                        <option value="乙卯">乙卯</option>
                        <option value="丙辰">丙辰</option>
                        <option value="丁巳">丁巳</option>
                        <option value="戊午">戊午</option>
                        <option value="己未">己未</option>
                        <option value="庚申">庚申</option>
                        <option value="辛酉">辛酉</option>
                        <option value="壬戌">壬戌</option>
                        <option value="癸亥">癸亥</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>月：</label>
                    <select id="month-jiazi">
                        <option value="">選擇月</option>
                        <option value="甲子">甲子</option>
                        <option value="乙丑">乙丑</option>
                        <option value="丙寅">丙寅</option>
                        <option value="丁卯">丁卯</option>
                        <option value="戊辰">戊辰</option>
                        <option value="己巳">己巳</option>
                        <option value="庚午">庚午</option>
                        <option value="辛未">辛未</option>
                        <option value="壬申">壬申</option>
                        <option value="癸酉">癸酉</option>
                        <option value="甲戌">甲戌</option>
                        <option value="乙亥">乙亥</option>
                        <option value="丙子">丙子</option>
                        <option value="丁丑">丁丑</option>
                        <option value="戊寅">戊寅</option>
                        <option value="己卯">己卯</option>
                        <option value="庚辰">庚辰</option>
                        <option value="辛巳">辛巳</option>
                        <option value="壬午">壬午</option>
                        <option value="癸未">癸未</option>
                        <option value="甲申">甲申</option>
                        <option value="乙酉">乙酉</option>
                        <option value="丙戌">丙戌</option>
                        <option value="丁亥">丁亥</option>
                        <option value="戊子">戊子</option>
                        <option value="己丑">己丑</option>
                        <option value="庚寅">庚寅</option>
                        <option value="辛卯">辛卯</option>
                        <option value="壬辰">壬辰</option>
                        <option value="癸巳">癸巳</option>
                        <option value="甲午">甲午</option>
                        <option value="乙未">乙未</option>
                        <option value="丙申">丙申</option>
                        <option value="丁酉">丁酉</option>
                        <option value="戊戌">戊戌</option>
                        <option value="己亥">己亥</option>
                        <option value="庚子">庚子</option>
                        <option value="辛丑">辛丑</option>
                        <option value="壬寅">壬寅</option>
                        <option value="癸卯">癸卯</option>
                        <option value="甲辰">甲辰</option>
                        <option value="乙巳">乙巳</option>
                        <option value="丙午">丙午</option>
                        <option value="丁未">丁未</option>
                        <option value="戊申">戊申</option>
                        <option value="己酉">己酉</option>
                        <option value="庚戌">庚戌</option>
                        <option value="辛亥">辛亥</option>
                        <option value="壬子">壬子</option>
                        <option value="癸丑">癸丑</option>
                        <option value="甲寅">甲寅</option>
                        <option value="乙卯">乙卯</option>
                        <option value="丙辰">丙辰</option>
                        <option value="丁巳">丁巳</option>
                        <option value="戊午">戊午</option>
                        <option value="己未">己未</option>
                        <option value="庚申">庚申</option>
                        <option value="辛酉">辛酉</option>
                        <option value="壬戌">壬戌</option>
                        <option value="癸亥">癸亥</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>日：</label>
                    <select id="day-jiazi">
                        <option value="">選擇日</option>
                        <option value="甲子">甲子</option>
                        <option value="乙丑">乙丑</option>
                        <option value="丙寅">丙寅</option>
                        <option value="丁卯">丁卯</option>
                        <option value="戊辰">戊辰</option>
                        <option value="己巳">己巳</option>
                        <option value="庚午">庚午</option>
                        <option value="辛未">辛未</option>
                        <option value="壬申">壬申</option>
                        <option value="癸酉">癸酉</option>
                        <option value="甲戌">甲戌</option>
                        <option value="乙亥">乙亥</option>
                        <option value="丙子">丙子</option>
                        <option value="丁丑">丁丑</option>
                        <option value="戊寅">戊寅</option>
                        <option value="己卯">己卯</option>
                        <option value="庚辰">庚辰</option>
                        <option value="辛巳">辛巳</option>
                        <option value="壬午">壬午</option>
                        <option value="癸未">癸未</option>
                        <option value="甲申">甲申</option>
                        <option value="乙酉">乙酉</option>
                        <option value="丙戌">丙戌</option>
                        <option value="丁亥">丁亥</option>
                        <option value="戊子">戊子</option>
                        <option value="己丑">己丑</option>
                        <option value="庚寅">庚寅</option>
                        <option value="辛卯">辛卯</option>
                        <option value="壬辰">壬辰</option>
                        <option value="癸巳">癸巳</option>
                        <option value="甲午">甲午</option>
                        <option value="乙未">乙未</option>
                        <option value="丙申">丙申</option>
                        <option value="丁酉">丁酉</option>
                        <option value="戊戌">戊戌</option>
                        <option value="己亥">己亥</option>
                        <option value="庚子">庚子</option>
                        <option value="辛丑">辛丑</option>
                        <option value="壬寅">壬寅</option>
                        <option value="癸卯">癸卯</option>
                        <option value="甲辰">甲辰</option>
                        <option value="乙巳">乙巳</option>
                        <option value="丙午">丙午</option>
                        <option value="丁未">丁未</option>
                        <option value="戊申">戊申</option>
                        <option value="己酉">己酉</option>
                        <option value="庚戌">庚戌</option>
                        <option value="辛亥">辛亥</option>
                        <option value="壬子">壬子</option>
                        <option value="癸丑">癸丑</option>
                        <option value="甲寅">甲寅</option>
                        <option value="乙卯">乙卯</option>
                        <option value="丙辰">丙辰</option>
                        <option value="丁巳">丁巳</option>
                        <option value="戊午">戊午</option>
                        <option value="己未">己未</option>
                        <option value="庚申">庚申</option>
                        <option value="辛酉">辛酉</option>
                        <option value="壬戌">壬戌</option>
                        <option value="癸亥">癸亥</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>時：</label>
                    <select id="hour-jiazi">
                        <option value="">選擇時</option>
                        <option value="甲子">甲子</option>
                        <option value="乙丑">乙丑</option>
                        <option value="丙寅">丙寅</option>
                        <option value="丁卯">丁卯</option>
                        <option value="戊辰">戊辰</option>
                        <option value="己巳">己巳</option>
                        <option value="庚午">庚午</option>
                        <option value="辛未">辛未</option>
                        <option value="壬申">壬申</option>
                        <option value="癸酉">癸酉</option>
                        <option value="甲戌">甲戌</option>
                        <option value="乙亥">乙亥</option>
                        <option value="丙子">丙子</option>
                        <option value="丁丑">丁丑</option>
                        <option value="戊寅">戊寅</option>
                        <option value="己卯">己卯</option>
                        <option value="庚辰">庚辰</option>
                        <option value="辛巳">辛巳</option>
                        <option value="壬午">壬午</option>
                        <option value="癸未">癸未</option>
                        <option value="甲申">甲申</option>
                        <option value="乙酉">乙酉</option>
                        <option value="丙戌">丙戌</option>
                        <option value="丁亥">丁亥</option>
                        <option value="戊子">戊子</option>
                        <option value="己丑">己丑</option>
                        <option value="庚寅">庚寅</option>
                        <option value="辛卯">辛卯</option>
                        <option value="壬辰">壬辰</option>
                        <option value="癸巳">癸巳</option>
                        <option value="甲午">甲午</option>
                        <option value="乙未">乙未</option>
                        <option value="丙申">丙申</option>
                        <option value="丁酉">丁酉</option>
                        <option value="戊戌">戊戌</option>
                        <option value="己亥">己亥</option>
                        <option value="庚子">庚子</option>
                        <option value="辛丑">辛丑</option>
                        <option value="壬寅">壬寅</option>
                        <option value="癸卯">癸卯</option>
                        <option value="甲辰">甲辰</option>
                        <option value="乙巳">乙巳</option>
                        <option value="丙午">丙午</option>
                        <option value="丁未">丁未</option>
                        <option value="戊申">戊申</option>
                        <option value="己酉">己酉</option>
                        <option value="庚戌">庚戌</option>
                        <option value="辛亥">辛亥</option>
                        <option value="壬子">壬子</option>
                        <option value="癸丑">癸丑</option>
                        <option value="甲寅">甲寅</option>
                        <option value="乙卯">乙卯</option>
                        <option value="丙辰">丙辰</option>
                        <option value="丁巳">丁巳</option>
                        <option value="戊午">戊午</option>
                        <option value="己未">己未</option>
                        <option value="庚申">庚申</option>
                        <option value="辛酉">辛酉</option>
                        <option value="壬戌">壬戌</option>
                        <option value="癸亥">癸亥</option>
                    </select>
                </div>
            </div>
        </div>

        <!-- 問事內容 -->
        <div class="section">
            <h2>問事內容</h2>
            <div class="form-row">
                <div class="form-group" style="flex: 1;">
                    <label>問事人之事：</label>
                    <textarea id="question-content" rows="3" style="width: 100%; padding: 8px; border: 1px solid #ccc; border-radius: 4px; font-size: 14px; resize: vertical;" placeholder="請描述問事的具體內容..."></textarea>
                </div>
            </div>
        </div>

        <!-- 本卦與變卦 -->
        <div class="section">
            <h2>本卦與變卦</h2>
            <div class="form-row">
                <div class="form-group">
                    <label>本卦：</label>
                    <select id="original-gua">
                        <option value="">選擇本卦</option>
                        <option value="乾為天">乾為天</option>
                        <option value="天地否">天地否</option>
                        <option value="天澤履">天澤履</option>
                        <option value="天山遯">天山遯</option>
                        <option value="天火同人">天火同人</option>
                        <option value="天水訟">天水訟</option>
                        <option value="天雷无妄">天雷无妄</option>
                        <option value="天風姤">天風姤</option>
                        <option value="地天泰">地天泰</option>
                        <option value="坤為地">坤為地</option>
                        <option value="地澤臨">地澤臨</option>
                        <option value="地山謙">地山謙</option>
                        <option value="地火明夷">地火明夷</option>
                        <option value="地水師">地水師</option>
                        <option value="地雷復">地雷復</option>
                        <option value="地風升">地風升</option>
                        <option value="澤天夬">澤天夬</option>
                        <option value="澤地萃">澤地萃</option>
                        <option value="兌為澤">兌為澤</option>
                        <option value="澤山咸">澤山咸</option>
                        <option value="澤火革">澤火革</option>
                        <option value="澤水困">澤水困</option>
                        <option value="澤雷隨">澤雷隨</option>
                        <option value="澤風大過">澤風大過</option>
                        <option value="山天大畜">山天大畜</option>
                        <option value="山地剝">山地剝</option>
                        <option value="山澤損">山澤損</option>
                        <option value="艮為山">艮為山</option>
                        <option value="山火賁">山火賁</option>
                        <option value="山水蒙">山水蒙</option>
                        <option value="山雷頤">山雷頤</option>
                        <option value="山風蠱">山風蠱</option>
                        <option value="火天大有">火天大有</option>
                        <option value="火地晉">火地晉</option>
                        <option value="火澤睽">火澤睽</option>
                        <option value="火山旅">火山旅</option>
                        <option value="離為火">離為火</option>
                        <option value="火水未濟">火水未濟</option>
                        <option value="火雷噬嗑">火雷噬嗑</option>
                        <option value="火風鼎">火風鼎</option>
                        <option value="水天需">水天需</option>
                        <option value="水地比">水地比</option>
                        <option value="水澤節">水澤節</option>
                        <option value="水山蹇">水山蹇</option>
                        <option value="水火既濟">水火既濟</option>
                        <option value="坎為水">坎為水</option>
                        <option value="水雷屯">水雷屯</option>
                        <option value="水風井">水風井</option>
                        <option value="雷天大壯">雷天大壯</option>
                        <option value="雷地豫">雷地豫</option>
                        <option value="雷澤歸妹">雷澤歸妹</option>
                        <option value="雷山小過">雷山小過</option>
                        <option value="雷火豐">雷火豐</option>
                        <option value="雷水解">雷水解</option>
                        <option value="震為雷">震為雷</option>
                        <option value="雷風恒">雷風恒</option>
                        <option value="風天小畜">風天小畜</option>
                        <option value="風地觀">風地觀</option>
                        <option value="風澤中孚">風澤中孚</option>
                        <option value="風山漸">風山漸</option>
                        <option value="風火家人">風火家人</option>
                        <option value="風水渙">風水渙</option>
                        <option value="風雷益">風雷益</option>
                        <option value="巽為風">巽為風</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>本卦特殊屬性：</label>
                    <select id="original-special">
                        <option value="">無特殊</option>
                        <option value="六沖">六沖</option>
                        <option value="六合">六合</option>
                        <option value="游魂">游魂</option>
                        <option value="歸魂">歸魂</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>變卦：</label>
                    <select id="changed-gua">
                        <option value="乾為天">乾為天</option>
                        <option value="天地否">天地否</option>
                        <option value="天澤履">天澤履</option>
                        <option value="天山遯">天山遯</option>
                        <option value="天火同人">天火同人</option>
                        <option value="天水訟">天水訟</option>
                        <option value="天雷无妄">天雷无妄</option>
                        <option value="天風姤">天風姤</option>
                        <option value="地天泰">地天泰</option>
                        <option value="坤為地">坤為地</option>
                        <option value="地澤臨">地澤臨</option>
                        <option value="地山謙">地山謙</option>
                        <option value="地火明夷">地火明夷</option>
                        <option value="地水師">地水師</option>
                        <option value="地雷復">地雷復</option>
                        <option value="地風升">地風升</option>
                        <option value="澤天夬">澤天夬</option>
                        <option value="澤地萃">澤地萃</option>
                        <option value="兌為澤">兌為澤</option>
                        <option value="澤山咸">澤山咸</option>
                        <option value="澤火革">澤火革</option>
                        <option value="澤水困">澤水困</option>
                        <option value="澤雷隨">澤雷隨</option>
                        <option value="澤風大過">澤風大過</option>
                        <option value="山天大畜">山天大畜</option>
                        <option value="山地剝">山地剝</option>
                        <option value="山澤損">山澤損</option>
                        <option value="艮為山">艮為山</option>
                        <option value="山火賁">山火賁</option>
                        <option value="山水蒙">山水蒙</option>
                        <option value="山雷頤">山雷頤</option>
                        <option value="山風蠱">山風蠱</option>
                        <option value="火天大有">火天大有</option>
                        <option value="火地晉">火地晉</option>
                        <option value="火澤睽">火澤睽</option>
                        <option value="火山旅">火山旅</option>
                        <option value="離為火">離為火</option>
                        <option value="火水未濟">火水未濟</option>
                        <option value="火雷噬嗑">火雷噬嗑</option>
                        <option value="火風鼎">火風鼎</option>
                        <option value="水天需">水天需</option>
                        <option value="水地比">水地比</option>
                        <option value="水澤節">水澤節</option>
                        <option value="水山蹇">水山蹇</option>
                        <option value="水火既濟">水火既濟</option>
                        <option value="坎為水">坎為水</option>
                        <option value="水雷屯">水雷屯</option>
                        <option value="水風井">水風井</option>
                        <option value="雷天大壯">雷天大壯</option>
                        <option value="雷地豫">雷地豫</option>
                        <option value="雷澤歸妹">雷澤歸妹</option>
                        <option value="雷山小過">雷山小過</option>
                        <option value="雷火豐">雷火豐</option>
                        <option value="雷水解">雷水解</option>
                        <option value="震為雷">震為雷</option>
                        <option value="雷風恒">雷風恒</option>
                        <option value="風天小畜">風天小畜</option>
                        <option value="風地觀">風地觀</option>
                        <option value="風澤中孚">風澤中孚</option>
                        <option value="風山漸">風山漸</option>
                        <option value="風火家人">風火家人</option>
                        <option value="風水渙">風水渙</option>
                        <option value="風雷益">風雷益</option>
                        <option value="巽為風">巽為風</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>變卦特殊屬性：</label>
                    <select id="changed-special">
                        <option value="">無特殊</option>
                        <option value="六沖">六沖</option>
                        <option value="六合">六合</option>
                        <option value="游魂">游魂</option>
                        <option value="歸魂">歸魂</option>
                    </select>
                </div>
            </div>
        </div>

        <!-- 六爻詳細資料 -->
        <div class="section">
            <h2>六爻詳細資料</h2>
            <div class="yao-container" id="yao-container">
                <!-- 六爻將通過JavaScript生成 -->
            </div>
        </div>

        <div class="btn-container">
            <button class="btn-generate" onclick="generatePrompt()">生成Prompt</button>
        </div>

        <!-- 結果顯示區域 -->
        <div class="result-container" id="result-container">
            <h2>生成的Prompt：</h2>
            <textarea class="result-textarea" id="result-textarea" readonly></textarea>
            <button class="btn-copy" onclick="copyToClipboard()">複製到剪貼板</button>
        </div>
    </div>

    <script>
        // 設定密碼
        const CORRECT_PASSWORD = "1234";
        
        // 檢查密碼
        function checkPassword() {
            const inputPassword = document.getElementById('password-input').value;
            const errorMessage = document.getElementById('error-message');
            
            if (inputPassword === CORRECT_PASSWORD) {
                document.getElementById('login-overlay').style.display = 'none';
                document.getElementById('main-container').style.display = 'block';
                initializePage();
            } else {
                errorMessage.style.display = 'block';
                document.getElementById('password-input').value = '';
                document.getElementById('password-input').focus();
            }
        }
        
        // 處理Enter鍵
        function handlePasswordEnter(event) {
            if (event.key === 'Enter') {
                checkPassword();
            }
        }
        
        // 十二地支選項
        const earthlyBranches = ['子', '丑', '寅', '卯', '辰', '巳', '午', '未', '申', '酉', '戌', '亥'];
        
        // 六親選項
        const sixRelatives = ['父母', '兄弟', '子孫', '妻財', '官鬼'];
        
        // 六獸選項
        const sixAnimals = ['青龍', '朱雀', '勾陳', '螣蛇', '白虎', '玄武'];

        // 生成六爻輸入區域
        function generateYaoInputs() {
            const container = document.getElementById('yao-container');
            const yaoNames = ['初爻', '二爻', '三爻', '四爻', '五爻', '上爻'];
            
            for (let i = 0; i < 6; i++) {
                const yaoDiv = document.createElement('div');
                yaoDiv.className = 'yao-item';
                yaoDiv.innerHTML = `
                    <h3>${yaoNames[i]}</h3>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label>伏神：</label>
                            <select id="fushen-${i}">
                                <option value="">無伏神</option>
                                ${earthlyBranches.map(branch => `<option value="${branch}">${branch}</option>`).join('')}
                            </select>
                        </div>
                        <div class="form-group">
                            <label>伏神六親：</label>
                            <select id="fushen-relative-${i}">
                                <option value="">無</option>
                                ${sixRelatives.map(rel => `<option value="${rel}">${rel}</option>`).join('')}
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label>六獸：</label>
                            <select id="animal-${i}">
                                <option value="">選擇六獸</option>
                                ${sixAnimals.map(animal => `<option value="${animal}">${animal}</option>`).join('')}
                            </select>
                        </div>
                        <div class="form-group">
                            <label>本卦六親：</label>
                            <select id="original-relative-${i}">
                                <option value="">選擇六親</option>
                                ${sixRelatives.map(rel => `<option value="${rel}">${rel}</option>`).join('')}
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label>裝卦(十二地支)：</label>
                            <select id="original-branch-${i}">
                                <option value="">選擇地支</option>
                                ${earthlyBranches.map(branch => `<option value="${branch}">${branch}</option>`).join('')}
                            </select>
                        </div>
                        <div class="form-group">
                            <label>變卦(十二地支)：</label>
                            <select id="changed-branch-${i}">
                                <option value="無變卦">無變卦</option>
                                ${earthlyBranches.map(branch => `<option value="${branch}">${branch}</option>`).join('')}
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label>變卦六親：</label>
                            <select id="changed-relative-${i}">
                                <option value="無">無</option>
                                ${sixRelatives.map(rel => `<option value="${rel}">${rel}</option>`).join('')}
                            </select>
                        </div>
                    </div>
                    
                    <div class="checkbox-group">
                        <label><input type="checkbox" id="shi-${i}"> 世爻</label>
                        <label><input type="checkbox" id="ying-${i}"> 應爻</label>
                        <label><input type="checkbox" id="body-${i}"> 卦身</label>
                        <label><input type="checkbox" id="kongwang-${i}"> 空亡</label>
                        <label><input type="radio" name="yinyang-${i}" value="陽爻"> 陽爻</label>
                        <label><input type="radio" name="yinyang-${i}" value="陰爻"> 陰爻</label>
                    </div>
                `;
                container.appendChild(yaoDiv);
            }
        }

        // 根據地支判斷五行
        function getWuXingFromBranch(branch) {
            const branchWuXing = {
                '子': '水', '亥': '水',
                '寅': '木', '卯': '木',
                '巳': '火', '午': '火',
                '申': '金', '酉': '金',
                '辰': '土', '戌': '土', '丑': '土', '未': '土'
            };
            return branchWuXing[branch] || '';
        }

        // 根據五行生成旺相休囚死
        function getWuXingStatus(monthWuXing) {
            const statusMap = {
                '木': '木旺 火相 水休 金囚 土死',
                '火': '火旺 土相 木休 水囚 金死',
                '土': '土旺 金相 火休 木囚 水死',
                '金': '金旺 水相 土休 火囚 木死',
                '水': '水旺 木相 金休 土囚 火死'
            };
            return statusMap[monthWuXing] || '';
        }

        // 生成Prompt
        function generatePrompt() {
            // 收集六十甲子時間
            const yearJiazi = document.getElementById('year-jiazi').value;
            const monthJiazi = document.getElementById('month-jiazi').value;
            const dayJiazi = document.getElementById('day-jiazi').value;
            const hourJiazi = document.getElementById('hour-jiazi').value;
            
            // 收集問事內容
            const questionContent = document.getElementById('question-content').value;
            
            // 收集本卦變卦信息
            const originalGua = document.getElementById('original-gua').value;
            const originalSpecial = document.getElementById('original-special').value;
            const changedGua = document.getElementById('changed-gua').value;
            const changedSpecial = document.getElementById('changed-special').value;
            
            // 根據月份地支判斷五行旺相休囚死
            let wuxingStatus = '';
            if (monthJiazi && monthJiazi.length >= 2) {
                const monthBranch = monthJiazi.charAt(1); // 取地支部分
                const monthWuXing = getWuXingFromBranch(monthBranch);
                if (monthWuXing) {
                    wuxingStatus = getWuXingStatus(monthWuXing);
                }
            }
            
            // 檢查是否有任何爻有變卦（不是「無變卦」）
            let hasAnyChangedYao = false;
            for (let i = 0; i < 6; i++) {
                const changedBranch = document.getElementById(`changed-branch-${i}`).value;
                if (changedBranch && changedBranch !== '無變卦') {
                    hasAnyChangedYao = true;
                    break;
                }
            }
            
            // 生成Prompt文本
            let prompt = `請幫我解這個六爻卦：\n\n`;
            
            if (questionContent) {
                prompt += `問事內容：${questionContent}\n\n`;
            }
            
            prompt += `起卦時間：年${yearJiazi} 月${monthJiazi} 日${dayJiazi} 時${hourJiazi}\n`;
            
            if (wuxingStatus) {
                prompt += `五行旺相休囚死：${wuxingStatus}\n`;
            }
            
            prompt += `本卦：${originalGua}${originalSpecial ? ' (' + originalSpecial + ')' : ''}\n`;
            prompt += `變卦：${changedGua}${changedSpecial ? ' (' + changedSpecial + ')' : ''}\n\n`;
            
            prompt += `六爻詳細資料：\n`;
            if (hasAnyChangedYao) {
                prompt += `| 爻位 | 伏神 | 伏神六親 | 六獸 | 本卦六親 | 裝卦 | 特殊 | 陰陽 | 變卦 | 變卦六親 |\n`;
                prompt += `|------|------|----------|------|----------|------|------|------|------|----------|\n`;
            } else {
                prompt += `| 爻位 | 伏神 | 伏神六親 | 六獸 | 本卦六親 | 裝卦 | 特殊 | 陰陽 |\n`;
                prompt += `|------|------|----------|------|----------|------|------|------|\n`;
            }
            
            const yaoNames = ['上爻', '五爻', '四爻', '三爻', '二爻', '初爻'];
            
            for (let i = 5; i >= 0; i--) {
                const fushen = document.getElementById(`fushen-${i}`).value || '無';
                const fushenRelative = document.getElementById(`fushen-relative-${i}`).value || '無';
                const animal = document.getElementById(`animal-${i}`).value || '';
                const originalRelative = document.getElementById(`original-relative-${i}`).value || '';
                const originalBranch = document.getElementById(`original-branch-${i}`).value || '';
                const changedBranch = document.getElementById(`changed-branch-${i}`).value || '';
                const changedRelative = document.getElementById(`changed-relative-${i}`).value || '';
                
                // 收集特殊標記
                const shi = document.getElementById(`shi-${i}`).checked ? '世' : '';
                const ying = document.getElementById(`ying-${i}`).checked ? '應' : '';
                const body = document.getElementById(`body-${i}`).checked ? '身' : '';
                const kongwang = document.getElementById(`kongwang-${i}`).checked ? '空' : '';
                const special = [shi, ying, body, kongwang].filter(x => x).join('/') || '無';
                
                // 收集陰陽
                const yinyang = document.querySelector(`input[name="yinyang-${i}"]:checked`)?.value || '';
                
                if (hasAnyChangedYao) {
                    prompt += `| ${yaoNames[5-i]} | ${fushen} | ${fushenRelative} | ${animal} | ${originalRelative} | ${originalBranch} | ${special} | ${yinyang} | ${changedBranch} | ${changedRelative} |\n`;
                } else {
                    prompt += `| ${yaoNames[5-i]} | ${fushen} | ${fushenRelative} | ${animal} | ${originalRelative} | ${originalBranch} | ${special} | ${yinyang} |\n`;
                }
            }
            
            prompt += `\n你是一位精通易經六爻占卜的分析師。請按以下步驟分析六爻卦象：

**基本信息分析：**
1. 確認主卦和變卦（如有）
2. 識別世爻、應爻位置
3. 確定用神（所求測之事對應的六親）
4. 分析卦宮歸屬和五行屬性

**本卦分析：**
1. 本卦卦名、卦象及其象徵意義
2. 本卦卦辭的含義和指導意義
3. 本卦所代表的整體趨勢和環境背景
4. 本卦在所測事項中的基本寓意

**動爻分析：**
1. 動爻位置和陰陽屬性
2. 動爻爻辭的具體內容和釋義
3. 動爻爻辭在當前情境下的指導意義
4. 動爻對整個卦象變化的推動作用

**變卦分析：**
1. 變卦卦名、卦象及其象徵意義
2. 變卦卦辭的含義和預示方向
3. 變卦所代表的發展結果和未來趨勢
4. 變卦在所測事項中的最終指向

**變卦動爻分析：**
1. 變卦中對應動爻位置的爻辭
2. 變卦動爻爻辭的具體釋義
3. 變卦動爻爻辭對結果的補充說明
4. 變卦動爻爻辭的行動指導意義

**卦象結構分析：**
1. 各爻的陰陽屬性和動靜狀態
2. 六親關係（父母、兄弟、子孫、妻財、官鬼）
3. 世應關係和生克制化
4. 動爻的影響和變化趨勢

**時空因素：**
1. 起卦時間的干支和五行
2. 月建、日辰對各爻的生克制化
3. 空亡、暗動等特殊狀態

**吉凶判斷依據：**
1. 用神的旺衰強弱
2. 喜忌神的作用關係
3. 卦象整體的平衡狀態
4. 時間因素的影響

**綜合結論：**
結合卦辭、爻辭的文義指導與六爻技法分析，提供：
- 所測事情的可能結果
- 發展趨勢和時間節點
- 卦爻辭中的重要提示
- 需要注意的要點
- 建議採取的行動

請根據傳統六爻理論和易經原文進行分析，保持客觀理性的態度。`;
            
            // 顯示結果
            document.getElementById('result-textarea').value = prompt;
            document.getElementById('result-container').style.display = 'block';
            
            // 滾動到結果區域
            document.getElementById('result-container').scrollIntoView({ behavior: 'smooth' });
        }

        // 複製到剪貼板
        function copyToClipboard() {
            const textarea = document.getElementById('result-textarea');
            textarea.select();
            document.execCommand('copy');
            alert('已複製到剪貼板！');
        }

        // 初始化頁面
        function initializePage() {
            generateYaoInputs();
        }

        // 頁面載入時聚焦密碼輸入框
        window.onload = function() {
            document.getElementById('password-input').focus();
        };
    </script>
</body>
</html>
